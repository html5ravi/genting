{"version":3,"sources":["../../src/pages/promotion-banner/promotion-banner.module.ts","../../src/providers/vouchers/vouchers.ts","../../node_modules/@ionic-native/barcode-scanner/index.js","../../src/pages/promotion-banner/promotion-banner.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PromotionBannerPage } from './promotion-banner';\nimport { SharedModule } from '../../app/shared.module';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\nimport { VouchersProvider } from '../../providers/vouchers/vouchers';\n\n\n\n@NgModule({\n  declarations: [\n    PromotionBannerPage,\n    //  BarcodeScanner,\n  ],\n  imports: [\n    IonicPageModule.forChild(PromotionBannerPage),\n    SharedModule\n  ],\n  providers: [BarcodeScanner,VouchersProvider],\n  \n})\nexport class PromotionBannerPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/promotion-banner/promotion-banner.module.ts","import { Injectable } from '@angular/core';\nimport { BASE_URL, BRAND_ID} from '../../config';\nimport { REDEEM_EXPERIENCES, ISSUE_VOUCHER, REDEEMED_VOUCHERS } from '../../url';\nimport { UserdataProvider } from '../userdata/userdata';\nimport { LoaderProvider } from '../loader/loader';\nimport { Observable } from 'rxjs/Observable';\nimport { VouchersData } from '../../models/voucherModel';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\n\n@Injectable()\nexport class VouchersProvider {\n  headers: HttpHeaders;\n  constructor(private userdataProvider:UserdataProvider,private loaderProvider:LoaderProvider,private httpClient:HttpClient) {\n    console.log('Hello VouchersProvider Provider');\n    this.headers = new HttpHeaders();\n  }\n\n  \n  \n  //Issue Voucher\n\n  issueVouchers(userEmail, expId,authKey) {\n    let loader = this.loaderProvider.presentLoadingCustom();\n    loader.present();\n    let userData = new FormData();\n    userData.append('brand_identifier', BRAND_ID);\n    userData.append('identifier_key','email');\n    userData.append('identifier_value', userEmail);\n    userData.append('email', userEmail);\n    userData.append('experience_id',expId);\n\nreturn this.httpClient.post(BASE_URL + ISSUE_VOUCHER,userData,{headers:new HttpHeaders().set('Authorization',authKey)})\n// .do((res: Response)=> res.json())\n// .map((res: Response) => res.json())\n.catch((err: Error) => Observable.throw(err))\n.finally(()=>this.loaderProvider.dismissLoader(loader))  \n\n  }\n\n  //Redeem Experience Vouchers //\n  redeemVouchers(userEmail, couponCode, authKey) {\n    let loader = this.loaderProvider.presentLoadingCustom();\n    loader.present();\n    let userData = new FormData();\n    userData.append('brand_identifier', BRAND_ID);\n    userData.append('identifier_key','email');\n    userData.append('identifier_value',userEmail);\n    userData.append('voucher_code',couponCode);\n\nreturn this.httpClient.post(BASE_URL + REDEEM_EXPERIENCES,userData,{headers:new HttpHeaders().set('Authorization',authKey)})\n  // .do((res: Response)=> res.json())\n  // .map((res: Response) => res.json())\n  .catch((err: Error) => Observable.throw(err))\n  .finally(()=>this.loaderProvider.dismissLoader(loader))   \n\n  }\n\n  \n\n  //returns users redeemed vouchers\n  getRedeemedVouchers(userEmail,authKey):Observable<VouchersData> {\n    let loader = this.loaderProvider.presentLoadingCustom();\n    loader.present();\n    return this.httpClient.get(BASE_URL + REDEEMED_VOUCHERS + userEmail + '&identifier_key=email' +  '&brand_identifier=' + BRAND_ID,{ headers:new HttpHeaders().set('Authorization',authKey) })\n      // .do((res: Response)=> <VouchersData> res.json())\n      // .map((res: Response) => res.json())\n      .catch((err: Error) => Observable.throw(err))\n      .finally(()=>this.loaderProvider.dismissLoader(loader)) \n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/vouchers/vouchers.ts","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nimport { Injectable } from '@angular/core';\r\nimport { Cordova, IonicNativePlugin, Plugin } from '@ionic-native/core';\r\n/**\r\n * @name Barcode Scanner\r\n * @description\r\n * The Barcode Scanner Plugin opens a camera view and automatically scans a barcode, returning the data back to you.\r\n *\r\n * Requires Cordova plugin: `phonegap-plugin-barcodescanner`. For more info, please see the [BarcodeScanner plugin docs](https://github.com/phonegap/phonegap-plugin-barcodescanner).\r\n *\r\n * @usage\r\n * ```typescript\r\n * import { BarcodeScanner } from '@ionic-native/barcode-scanner';\r\n *\r\n * constructor(private barcodeScanner: BarcodeScanner) { }\r\n *\r\n * ...\r\n *\r\n *\r\n * this.barcodeScanner.scan().then(barcodeData => {\r\n *  console.log('Barcode data', barcodeData);\r\n * }).catch(err => {\r\n * \tconsole.log('Error', err);\r\n * });\r\n * ```\r\n * @interfaces\r\n * BarcodeScannerOptions\r\n * BarcodeScanResult\r\n */\r\nvar BarcodeScanner = (function (_super) {\r\n    __extends(BarcodeScanner, _super);\r\n    function BarcodeScanner() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.Encode = {\r\n            TEXT_TYPE: 'TEXT_TYPE',\r\n            EMAIL_TYPE: 'EMAIL_TYPE',\r\n            PHONE_TYPE: 'PHONE_TYPE',\r\n            SMS_TYPE: 'SMS_TYPE'\r\n        };\r\n        return _this;\r\n    }\r\n    /**\r\n     * Open the barcode scanner.\r\n     * @param {BarcodeScannerOptions} [options] Optional options to pass to the scanner\r\n     * @returns {Promise<any>} Returns a Promise that resolves with scanner data, or rejects with an error.\r\n     */\r\n    BarcodeScanner.prototype.scan = function (options) {\r\n        return;\r\n    };\r\n    /**\r\n     * Encodes data into a barcode.\r\n     * NOTE: not well supported on Android\r\n     * @param {string} type Type of encoding\r\n     * @param {any} data Data to encode\r\n     * @returns {Promise<any>}\r\n     */\r\n    BarcodeScanner.prototype.encode = function (type, data) {\r\n        return;\r\n    };\r\n    BarcodeScanner.decorators = [\r\n        { type: Injectable },\r\n    ];\r\n    /** @nocollapse */\r\n    BarcodeScanner.ctorParameters = function () { return []; };\r\n    __decorate([\r\n        Cordova({\r\n            callbackOrder: 'reverse'\r\n        }),\r\n        __metadata(\"design:type\", Function),\r\n        __metadata(\"design:paramtypes\", [Object]),\r\n        __metadata(\"design:returntype\", Promise)\r\n    ], BarcodeScanner.prototype, \"scan\", null);\r\n    __decorate([\r\n        Cordova(),\r\n        __metadata(\"design:type\", Function),\r\n        __metadata(\"design:paramtypes\", [String, Object]),\r\n        __metadata(\"design:returntype\", Promise)\r\n    ], BarcodeScanner.prototype, \"encode\", null);\r\n    BarcodeScanner = __decorate([\r\n        Plugin({\r\n            pluginName: 'BarcodeScanner',\r\n            plugin: 'phonegap-plugin-barcodescanner',\r\n            pluginRef: 'cordova.plugins.barcodeScanner',\r\n            repo: 'https://github.com/phonegap/phonegap-plugin-barcodescanner',\r\n            platforms: ['Android', 'BlackBerry 10', 'Browser', 'iOS', 'Windows']\r\n        })\r\n    ], BarcodeScanner);\r\n    return BarcodeScanner;\r\n}(IonicNativePlugin));\r\nexport { BarcodeScanner };\r\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@ionic-native/barcode-scanner/index.js\n// module id = 881\n// module chunks = 1 8","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events} from 'ionic-angular';\nimport { UserdataProvider } from '../../providers/userdata/userdata';\nimport { VouchersProvider } from '../../providers/vouchers/vouchers';\nimport { AlertProvider } from '../../providers/alert/alert';\nimport { ExceptionHandlerProvider } from '../../providers/exception-handler/exception-handler';\nimport { BarcodeScanner, BarcodeScannerOptions } from '@ionic-native/barcode-scanner';\nimport { AnalyticsProvider } from '../../providers/analytics/analytics';\nimport { TranslateService } from '@ngx-translate/core';\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-promotion-banner',\n  templateUrl: 'promotion-banner.html',\n  \n})\nexport class PromotionBannerPage {\n\n  auth_key:string;\n  _userEmail:string\n  promotion: any;\n  _redeemedVoucherList: any = [];\n  isAlreadyRedeemed: boolean = false;\n  redeemedVoucher: any;\n  _viewCode:any;\n  _redeemedText: string = \"redeem offer\";\n  \n\n  constructor(private navCtrl: NavController, private navParams: NavParams, \n              private userdataProvider: UserdataProvider, private vouchersProvider: VouchersProvider,\n              private alertProvider: AlertProvider, private excepProvider: ExceptionHandlerProvider,\n              private barcodeScanner: BarcodeScanner,\n              private events: Events,private analytics: AnalyticsProvider,private translate:TranslateService ) {\n                \n              this.promotion = this.navParams.get(\"promotion\");\n    \n             this.events.subscribe('redeemlist', isDataAvailable => {\n               if (isDataAvailable) {\n                 if (this.promotion && this.promotion.experiencesidforvipoffersonly)\n                   this.isVoucherRedeemed(this.promotion.experiencesidforvipoffersonly);\n               }  \n            })\n               \n    this.analytics.fa.logEvent('PromotionDetailsPage');\n    \n  }\n\n\n  //get User auth_key//\n   \n  ionViewWillEnter(){\n    this.userdataProvider.getAuthToken().then(data=>{\n      this.auth_key = data;\n      if (this.auth_key) {\n        this._userEmail = this.userdataProvider.getUserEmailId();\n        this.getRedeemedVouchers( this._userEmail,this.auth_key)\n      }\n    })\n\n  }\n\n\n  //If user not logged In\n  goToLoginPage(){\n    this.navCtrl.setRoot(\"LoginPage\");\n  }\n\n\n\n  // Issue Voucher using expId. success will call scanQrCode function  \n  issueVoucher(expId) {\n    \n    this.vouchersProvider.issueVouchers(this._userEmail, expId, this.auth_key).subscribe(res => {\n      if (res[0].code == 200) \n          this.redeemVoucher(res[0].coupon_code);\n      else {\n        let toast = this.alertProvider.presentToast(res[0].message)\n        toast.present();\n      }\n      \n    }, err => this.excepProvider.excpHandler(err))\n\n  }\n\n\n  isVoucherRedeemed(expId) {\n\n    this.redeemedVoucher = this._redeemedVoucherList.filter(voucher => voucher.ExperienceId == expId);\n    if (this.redeemedVoucher.length > 0) {\n      this.isAlreadyRedeemed = true;\n      this._redeemedText= \"View Redemption Summary\";    \n    }\n    else {\n      this.isAlreadyRedeemed = false;\n        \n      }\n  }\n\n\n\n  //Scan QrCode to check whether customer redeeming voucher in the right store . if success then call redeemVoucher\n  scanQrCode(expId) {\n\n    if (this.isAlreadyRedeemed) {\n\n          this.navCtrl.push('PromotionReedemPage', { voucherdata: this.redeemedVoucher[0], storedata: this.promotion,isalreadyredeemed:true });\n      \n    } else {\n      let barcodeOptions: BarcodeScannerOptions = {\n        resultDisplayDuration: 0,\n        prompt: 'Please scan the QR Code of the store. Place the QR Code within the viewfinder.'\n      }\n    \n   \n      this.barcodeScanner.scan(barcodeOptions).then((barcodeData) => {\n        if (barcodeData.text == this.promotion.associatedstore[0].qrcodeidentifier)\n          this.issueVoucher(expId);\n\n        else {\n          let toast = this.alertProvider.presentToast('Sorry, you are at a wrong store');\n          toast.present();\n        }\n\n      }, (err) => {\n         \n        let toast = this.alertProvider.presentToast('error in scanning qrcode');\n        toast.present();\n          \n      });\n    }  \n  }\n\n\n\n\n// redeem a issued voucher \n  redeemVoucher(couponcode) {\n\n\n    this.vouchersProvider.redeemVouchers(this._userEmail, couponcode, this.auth_key).subscribe(redeemVoucher => {\n      if (redeemVoucher[0].code == 200)\n        this.navCtrl.push('PromotionReedemPage', { voucherdata: redeemVoucher[0].voucher_info, storedata:this.promotion, isalreadyredeemed:false})\n      else {\n        let toast = this.alertProvider.presentToast(redeemVoucher[0].message);\n        toast.present();\n      }\n    }, err => this.excepProvider.excpHandler(err))\n      \n  }\n  \n\n\n\n  \n  \n  \n  getRedeemedVouchers(useremail,authKey) {\n \n    this.vouchersProvider.getRedeemedVouchers(useremail,authKey).subscribe(res => {\n      this._redeemedVoucherList = res[0].customer_vouchers;\n      this.events.publish('redeemlist', true);\n    })\n  }\n\n  viewReedem(code){\n    this._viewCode == this.promotion.associatedstore[0].qrcodeidentifier;\n    this.issueVoucher(code);\n  }\n\n\n  gotoPage(page) {\n    this.navCtrl.setRoot(page);\n  }\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/promotion-banner/promotion-banner.ts"],"sourceRoot":""}