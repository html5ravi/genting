{"version":3,"sources":["../../src/pages/otp/otp.module.ts","../../src/validator/profile.ts","../../src/pages/otp/otp.ts"],"names":[],"mappings":"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","file":"47.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OtpPage } from './otp';\nimport { SharedModule } from '../../app/shared.module';\n\n\n@NgModule({\n  declarations: [\n    OtpPage,\n    \n  ],\n  imports: [\n    \n    IonicPageModule.forChild(OtpPage),\n    SharedModule\n  ],\n})\nexport class OtpPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/otp/otp.module.ts","import { FormControl } from '@angular/forms';\n\nexport function validateName(c: FormControl) {\nlet name_pattern = \"[a-zA-Z][a-zA-Z ]+\";\nreturn name_pattern.concat(c.value) ? null : {\n    validateName: {\n    valid: false\n    }\n    };         \n}\n\nexport function noWhitespaceValidator(control: FormControl) {\n    if(control.value){\n        let isWhitespace = (control.value || '').trim().length === 0;\n        // console.log((control.value || '').trim().length);\n        // console.log(isWhitespace, \"is white space\");\n        let isValid = !isWhitespace;\n        return isValid ? null : { 'whitespace': true }\n    }else{\n        return {'whitespace':false}\n    }\n   \n}\n\nexport function onlyNumbers(control: FormControl) {\n    if (control.value) {\n        let isValid = (/^[0-9]+$/).test(control.value);\n        return isValid ? null : { 'onlynumber': true };\n    } \n    else{\n        return {'onlynumber':false}\n    }\n    \n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/profile.ts","import { Component,ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, MenuController } from 'ionic-angular';\nimport { UserdataProvider } from '../../providers/userdata/userdata';\nimport { ExceptionHandlerProvider } from '../../providers/exception-handler/exception-handler';\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { AlertProvider } from '../../providers/alert/alert';\nimport { CommonProvider } from '../../providers/common/common';\nimport { FormBuilder, FormGroup, Validators, AbstractControl } from '@angular/forms';\nimport { noWhitespaceValidator } from '../../validator/profile';\nimport { AnalyticsProvider } from '../../providers/analytics/analytics';\nimport { TranslateService } from '@ngx-translate/core';\n\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-otp',\n  templateUrl: 'otp.html',\n})\nexport class OtpPage {\n  @ViewChild('terms') modalTerm;\n  _OTPForm : FormGroup;\n  _email:string;\n  _isRegistered:boolean;\n  _otp: AbstractControl;\n  _social_user_id: string;\n  _social_channel: string;\n  _loginButton: string;\n  _isSocialChannelPresent: boolean;\n\n  constructor(private navCtrl: NavController,\n              private navParams: NavParams, \n              private alertProvider:AlertProvider,\n              private authProvider:AuthProvider,\n              private commonProvider:CommonProvider,\n              private excepProvider:ExceptionHandlerProvider,\n              private userdataProvider:UserdataProvider,\n              private menuController:MenuController,\n              public formBuilder: FormBuilder,\n              private analytics: AnalyticsProvider,private translate:TranslateService) {\n\n\n              this._OTPForm = formBuilder.group({\n                _otp:['', Validators.compose([Validators.required, Validators.minLength(4),Validators.maxLength(4),noWhitespaceValidator])]\n              });\n\n              this._otp = this._OTPForm.controls['_otp'];\n\n\n                this._email = this.navParams.get('email');\n                this._isRegistered = this.navParams.get('isregistered');\n                this._social_user_id = this.navParams.get('social_user_id');\n                this._social_channel = this.navParams.get('social_channel');\n                this._isSocialChannelPresent = this.navParams.get('isSocialChannelPresent');\n    \n              \n    \n\n            this._loginButton = this._isRegistered ? 'Login' : 'Join Now';\n    \n            this.analytics.fa.logEvent('OtpPage');\n\n  }\n\n  \n  ionViewWillEnter(){\n    this.menuController.swipeEnable(false);\n    if(this.menuController.isOpen())\n        this.menuController.close();\n   }\n    \n \n  \n\n//validate the otp and then check whether the user is registered or not\nvalidateOtp(){\n\n\n  \n  \n  this.authProvider.verifyOtp(this._email, this._OTPForm.value).subscribe(res => {\n\n\n    if (res[0].code == 200) {\n      \n\n      if (this._isRegistered && res[0].customer_data && !this._social_user_id && !this._social_channel && !this._isSocialChannelPresent) {\n\n        this.commonProvider.setUserData(res[0].auth_key, res);\n        if (this.commonProvider._noOfMalls == 1) {\n          setTimeout(() => {\n            this.navCtrl.setRoot('Homepage');\n          },500)\n        }\n        else if (this.commonProvider._noOfMalls > 1) {\n          setTimeout(() => {\n            this.navCtrl.setRoot('SelectOutletPage');\n          }, 500);\n          \n        }\n          \n      }\n\n      else if (!this._isRegistered && !this._social_user_id && !this._social_channel && !this._isSocialChannelPresent) {\n        \n        this.navCtrl.push('LoginFullInfoPage', { email: this._email, tempAuthToken: res[0].auth_key });\n\n      }\n      \n      else if (this._isRegistered && res[0].customer_data && this._social_user_id && this._social_channel && this._isSocialChannelPresent === false) {\n\n        this.userdataProvider.setUser(res[0].customer_data);\n        this.navCtrl.push('LoginFullInfoPage', { email: this._email, tempAuthToken: res[0].auth_key, social_user_id: this._social_user_id, social_channel: this._social_channel, isSocialChannelPresent: this._isSocialChannelPresent, customerdata: res[0].customer_data.customer[0], isRegistered: this._isRegistered });\n      \n        \n      }\n      \n      else if (!this._isRegistered && this._social_user_id && this._social_channel && this._isSocialChannelPresent === false) {\n        this.navCtrl.push('LoginFullInfoPage', { email: this._email, tempAuthToken: res[0].auth_key,social_user_id:this._social_user_id,social_channel:this._social_channel,isSocialChannelPresent:this._isSocialChannelPresent });\n        }\n   \n    } else {\n      let toast = this.alertProvider.presentToast(res[0].message);\n      toast.present();\n\n    }\n  },err=>this.excepProvider.excpHandler(err))  \n}\n  \nclose(){\n  this.modalTerm.close();\n}\n\n    resendOtp(){\n    \n      this.authProvider.sendOTP({email:this._email}).subscribe(result => {\n\n        if(result[0].code == 200){\n\n         let toast = this.alertProvider.presentToast(result[0].message);\n          toast.present();\n      }\n    }, err => this.excepProvider.excpHandler(err))\n  }\n    \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/otp/otp.ts"],"sourceRoot":""}